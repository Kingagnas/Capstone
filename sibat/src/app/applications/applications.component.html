<div class="applications">
  <h1>Runner Applications</h1>

  <!-- Loading Indicator -->
  <div *ngIf="loading" class="loading">
    <p>Loading applications...</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="error">
    <p>{{ errorMessage }}</p>
  </div>

  <!-- No Applications Message -->
  <div *ngIf="!loading && applications.length === 0 && !errorMessage" class="no-applications">
    <p>No applications found.</p>
  </div>

  <!-- Applications Table -->
  <div class="table-container" *ngIf="!loading && applications.length > 0">
    <table class="applications-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>User ID</th>
          <th>Mode of Transport</th>
          <th>Emergency Contact</th>
          <th>Emergency Number</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let application of applications">
          <td>{{ application.application_id }}</td>
          <td>{{ application.userid }}</td>
          <td>{{ application.mode_of_transport }}</td>
          <td>{{ application.emergency_contact_person }}</td>
          <td>{{ application.emergency_contact_number }}</td>
          <td>{{ application.status }}</td>
          <td>
            <button class="approve-btn" (click)="approveApplication(application.application_id, application.userid)">Approve</button>
            <button class="reject-btn" (click)="rejectApplication(application.application_id)">Reject</button>
            <button class="documents-btn" (click)="viewDocuments(application)">View Documents</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Mobile Card Layout -->
  <div class="cards-container" *ngIf="!loading && applications.length > 0">
    <div class="card" *ngFor="let application of applications">
      <p><b>ID:</b> {{ application.application_id }}</p>
      <p><b>User ID:</b> {{ application.userid }}</p>
      <p><b>Mode of Transport:</b> {{ application.mode_of_transport }}</p>
      <p><b>Emergency Contact:</b> {{ application.emergency_contact_person }}</p>
      <p><b>Emergency Number:</b> {{ application.emergency_contact_number }}</p>
      <p><b>Status:</b> {{ application.status }}</p>
      <div class="card-actions">
        <button class="approve-btn" (click)="approveApplication(application.application_id, application.userid)">Approve</button>
        <button class="reject-btn" (click)="rejectApplication(application.application_id)">Reject</button>
        <button class="documents-btn" (click)="viewDocuments(application)">View Documents</button>
      </div>
    </div>
  </div>

  <!-- Documents Modal -->
  <div class="modal" *ngIf="isDocumentsModalOpen">
    <div class="modal-content">
      <h2>Uploaded Documents</h2>
      <ul>
        <li *ngIf="selectedApplication.valid_id_1_url"><a [href]="selectedApplication.valid_id_1_url" target="_blank">Valid ID 1</a></li>
        <li *ngIf="selectedApplication.valid_id_2_url"><a [href]="selectedApplication.valid_id_2_url" target="_blank">Valid ID 2</a></li>
        <li *ngIf="selectedApplication.police_clearance_url"><a [href]="selectedApplication.police_clearance_url" target="_blank">Police Clearance</a></li>
        <li *ngIf="selectedApplication.barangay_clearance_url"><a [href]="selectedApplication.barangay_clearance_url" target="_blank">Barangay Clearance</a></li>
      </ul>
      <div class="modal-actions">
        <button class="close-btn" (click)="closeDocumentsModal()">Close</button>
      </div>
    </div>
  </div>
</div>
