<div class="profile-container">
  <div class="profile-card">
    <div class="profile-pic-container">
      <img [src]="user.profilepic || 'assets/avatar.png'" alt="Profile Picture" class="profile-pic" />
      <input type="file" (change)="onFileSelected($event)" accept="image/*" hidden #fileInput />
      <button class="edit-button" mat-icon-button (click)="fileInput.click()">
        <mat-icon>edit</mat-icon>
      </button>
    </div>

    <h2 class="profile-name">{{ user.first_name }} {{ user.last_name }}</h2>

<div class="runner-rating" *ngIf="user.role === 'runner'">
  <span *ngFor="let star of getStarsArray(averageRating)">
    <mat-icon color="warn">{{ star ? 'star' : 'star_border' }}</mat-icon>
  </span>
  <span class="rating-value">{{ averageRating.toFixed(2) }}/5</span>
</div>
    <div class="profile-info-container" *ngIf="!editMode">
      <p class="profile-info"><strong>ğŸ“ Location:</strong> {{ user.location }}</p>
      <p class="profile-info"><strong>âœ‰ï¸ Email:</strong> {{ user.email }}</p>
      <p class="profile-info"><strong>ğŸ“ Mobile:</strong> {{ user.contact_number }}</p>
    </div>

    <!-- Edit Info Button -->
    <button class="edit-info-button" mat-raised-button color="primary" (click)="toggleEdit()">Edit Info</button>

    <!-- Editable Form (Shown When Edit Mode is Enabled) -->
    <form *ngIf="editMode" [formGroup]="profileForm" (ngSubmit)="saveChanges()">
      <div class="form-group">
        <label>First Name</label>
        <input formControlName="first_name" type="text" class="form-control" />
      </div>
      <div class="form-group">
        <label>Last Name</label>
        <input formControlName="last_name" type="text" class="form-control" />
      </div>
      <div class="form-group">
        <label>Location</label>
        <input formControlName="location" type="text" class="form-control" />
      </div>
      <div class="form-group">
        <label>Email</label>
        <input formControlName="email" type="email" class="form-control" />
      </div>
      <div class="form-group">
        <label>Contact Number</label>
        <input formControlName="contact_number" type="text" class="form-control" />
      </div>

      <!-- Save & Cancel Buttons -->
      <button type="submit" mat-raised-button color="accent">Save Changes</button>
      <button type="button" mat-button (click)="toggleEdit()">Cancel</button>
    </form>
  </div>
</div>
