<h2 class="title">Errand Chat History</h2>

<div *ngIf="chatHistory.length === 0" class="empty">
  No chat history found.
</div>

<div class="cards-container">
  <div *ngFor="let chat of chatHistory" class="chat-card">

    <div class="card-header">
      <span>History #{{ chat.history_id }}</span>
      <span class="status">{{ chat.status }}</span>
    </div>

    <div class="card-body">
      <p>
        <strong>Customer:</strong>
        {{ chat.customer_first_name }} {{ chat.customer_last_name }}
      </p>

      <p><strong>User ID:</strong> {{ chat.user_id }}</p>

      <p>
        <strong>Rating:</strong>
        {{ chat.rating ?? 'N/A' }}
      </p>

      <p>
        <strong>Rate Notes:</strong>
        {{ chat.rate_notes ?? 'None' }}
      </p>

      <p>
        <strong>Created:</strong>
        {{ chat.created_at | date:'MMMM d, y • h:mm a' }}
      </p>

      <hr />

      <p class="money">
        <strong>Service Charge:</strong>
        ₱{{ chat.service_charge ?? '0.00' }}
      </p>

      <p class="money">
        <strong>Tip:</strong>
        ₱{{ chat.tip ?? '0.00' }}
      </p>

      <p class="money total">
        <strong>Total Price:</strong>
        ₱{{ chat.total_price ?? '0.00' }}
      </p>
    </div>

  </div>
</div>
